# 游戏机制Skills说明

## 概述

为了避免使用代码，我们将所有游戏机制都设计成了独立的Claude Code Skills。这些skills可以随时被玩家调用，提供各种游戏辅助功能。

---

## 🎮 5大机制Skills

### 1. 📊 game_state - 游戏状态管理
**位置**：`.claude/skills/game_state/`

**功能**：
- 查看当前游戏进度（章节、时间、版本）
- 查看角色存活状态
- 查看已收集线索数量
- 查看信任度和嫌疑度
- 查看玩家选择历史

**使用场景**：
- 玩家想知道"我现在在哪里？"
- 查看整体进度
- 确认当前状态再做决定

**调用方式**：
```
使用 game_state skill
或者
"查看游戏状态"
"我现在在第几章？"
```

---

### 2. 🔍 clue_system - 线索系统
**位置**：`.claude/skills/clue_system/`

**功能**：
- 查看所有已收集线索
- 按重要性/类型分类
- 分析线索之间的关联
- 提供线索关联图
- 发现矛盾之处

**使用场景**：
- 忘记了收集过什么线索
- 想整理思路进行推理
- 寻找线索间的联系

**调用方式**：
```
使用 clue_system skill
或者
"查看所有线索"
"这条线索是什么意思?"
"分析线索关系"
```

---

### 3. ⚖️ reasoning - 推理系统
**位置**：`.claude/skills/reasoning/`

**功能**：
- 提交推理报告
- 指认凶手
- 判断推理正确性
- 根据准确度给予不同结局
- 处理推理失败的惩罚

**使用场景**：
- 认为已经找到真凶
- 想尝试推理
- 准备进入结局阶段

**调用方式**：
```
使用 reasoning skill
或者
"我要推理凶手"
"我认为凶手是XX"
```

**重要**：这是游戏核心机制，成功推理=好结局，失败=坏结局/惩罚

---

### 4. 👥 character_info - 角色信息
**位置**：`.claude/skills/character_info/`

**功能**：
- 查看所有角色档案
- 查看特定角色详情
- 角色关系图谱
- 嫌疑度排行
- 角色对比分析

**使用场景**：
- 想了解某个角色的背景
- 忘记了某人的特征
- 需要对比不同嫌疑人

**调用方式**：
```
使用 character_info skill
或者
"查看所有角色"
"XX是什么人？"
"谁最可疑？"
```

**特色**：信息渐进披露，探索越多，了解越深

---

### 5. 💡 hint_helper - 智能提示助手
**位置**：`.claude/skills/hint_helper/`

**功能**：
- 5层渐进式提示（subtle → 明显）
- 方向性建议
- 线索关联分析
- 卡关检测与帮助

**使用场景**：
- 完全不知道该做什么
- 卡关很久没有进展
- 需要一些推理方向

**调用方式**：
```
使用 hint_helper skill
或者
"我卡住了"
"给我一些提示"
"下一步该怎么办？"
```

**特色**：可选辅助，尊重玩家选择，不强制给提示

---

## 🔗 Skills之间的协同

### 典型游玩流程

```
1. [章节Skill] 游玩剧情，探索场景
     ↓
2. [game_state] 查看当前状态和进度
     ↓
3. [clue_system] 回顾收集的线索
     ↓
4. [character_info] 分析可疑人物
     ↓
5. [reasoning] 提交推理指认凶手
     ↓
6. [ch4_endings] 获得相应结局
```

### 如果卡关

```
1. [hint_helper] 寻求提示 (可选)
     ↓
2. [clue_system] 重新梳理线索
     ↓
3. [character_info] 重新分析角色
     ↓
4. 返回[章节Skill]继续探索
```

---

## 🎯 设计理念

### 为什么用Skills而不是代码？

1. **符合Claude Code哲学**
   - Claude Code的设计就是用Prompt而非代码
   - Skills是最自然的扩展方式

2. **更灵活的交互**
   - 玩家可以用自然语言调用
   - 不需要记住命令格式
   - AI可以理解意图并响应

3. **易于维护和扩展**
   - 修改skill只需要改markdown文件
   - 不需要担心代码兼容性
   - 可以随时添加新功能

4. **降低技术门槛**
   - 玩家不需要懂编程
   - 创作者也不需要写代码
   - 专注于内容和体验

### 核心原则

所有机制Skills遵循以下原则：

1. **无代码**：纯Prompt实现所有功能
2. **自然交互**：支持自然语言而非命令
3. **渐进披露**：信息分层，不剧透
4. **引导思考**：提供框架，不给答案
5. **尊重选择**：可选调用，不强制

---

## 📖 使用建议

### 给玩家的建议

**新手**：
- 善用 `game_state` 了解自己的进度
- 善用 `clue_system` 整理思路
- 如果卡关，`hint_helper` 是你的朋友
- 不要过早使用 `reasoning`，收集足够证据再推理

**进阶玩家**：
- 尝试不用 `hint_helper` 完成游戏
- 多用 `character_info` 深入分析角色
- 用 `clue_system` 的关联功能自己推导
- 挑战最少提示通关

**多周目玩家**：
- 探索不同的推理时机
- 尝试在不同章节使用 `reasoning`
- 发现隐藏的线索组合
- 挑战纯推理（不用任何辅助skill）

### 给创作者的建议

如果你想基于这个框架创作新游戏：

1. **保留核心机制Skills**
   - game_state, clue_system, reasoning是必需的
   - 根据游戏调整内容即可

2. **自定义chapter_info**
   - 根据你的角色设定修改
   - 信息分层结构可复用

3. **可选的hint_helper**
   - 如果游戏很难，建议保留
   - 如果想要硬核体验，可以去掉

4. **添加特殊Skills**
   - 例如：地图系统、物品栏、时间管理
   - 都可以用skill实现，不需要代码

---

## 🔧 技术实现细节

### JSON状态文件

所有Skills都依赖 `game_state.json` 文件：

```json
{
  "player_name": "透",
  "current_chapter": "ch1a_investigate",
  "scene_progress": "scene2_investigation",
  "interaction_count": 8,
  "collected_clues": [
    {
      "id": "clue_01",
      "name": "专业切割手法",
      "description": "...",
      "importance": "关键",
      ...
    }
  ],
  "trust_levels": {...},
  "suspicion_points": {...},
  ...
}
```

### Skills如何读取状态

每个skill的SKILL.md中都包含：

```markdown
## 系统指令

1. 读取 `game_state.json`
2. 提取相关信息
3. 根据玩家请求格式化输出
4. （某些skill会）更新状态
```

### 哪些Skills会修改状态

- **game_state**: 只读，不修改
- **clue_system**: 只读，不修改
- **reasoning**: ✅ 会修改（更新推理结果）
- **character_info**: 只读，不修改
- **hint_helper**: ✅ 会修改（记录提示次数）
- **章节Skills**: ✅ 会修改（推进剧情、收集线索）

---

## 📈 未来扩展可能性

基于这个框架，可以轻松添加：

### 潜在的新机制Skills

1. **timeline_viewer** - 时间线查看器
   - 按时间顺序展示所有事件
   - 发现时间上的矛盾
   - 重建案发过程

2. **location_map** - 地点地图
   - 旅馆平面图
   - 标注重要地点
   - 记录在哪里发现了什么

3. **relationship_analyzer** - 关系分析器
   - 深度分析人物关系网
   - 发现隐藏的关联
   - 动态更新关系变化

4. **evidence_lab** - 证据实验室
   - 深入分析物证
   - 模拟作案过程
   - 验证推理假设

5. **save_load** - 存档管理
   - 多存档支持
   - 快速读档
   - 分支对比

6. **achievement_tracker** - 成就追踪
   - 查看解锁成就
   - 追踪收集进度
   - 多周目统计

### 扩展章节系统

可以添加更多章节，例如：

- 序章（回忆杀，展示20年前）
- 支线章节（深入某个角色的故事）
- 番外章节（不同视角重玩）
- DLC章节（新案件）

每个都是独立的skill，互不影响。

---

## ✅ 总结

我们成功地将游戏的所有机制都设计成了Skills，完全不需要编写代码。

**优势**：
- ✅ 符合Claude Code的设计理念
- ✅ 玩家体验流畅自然
- ✅ 易于维护和扩展
- ✅ 降低技术门槛
- ✅ 可以随时添加新功能

**核心理念**：
> 在AI时代，游戏设计可以完全用自然语言和Prompt实现，
> 代码不是必需的，创意和体验才是核心。

---

**现在，《恐怖惊魂夜》拥有了完整的无代码游戏系统！**

玩家可以：
- 使用章节Skills游玩剧情
- 使用机制Skills管理游戏
- 用自然语言与所有系统交互
- 获得完整的推理游戏体验

一切都在Claude Code中，一切都是Skills！
